<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="anexo_al_balance.report_partner_trial_balance_line">
    <tr style="font-weight: bold">
      <td>
        <span t-att-style="style" t-esc="account['code']"/>
      </td>
      <td>
        <span style="color: white;" t-esc="'..'"/>
        <span t-att-style="style" t-esc="account['name']"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['balance_prev']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['debit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['credit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['balance_total']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
    </tr>
  </template>
  
  <template id="anexo_al_balance.report_partner_trial_balance_subline">
    <tr>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['code']"/>
      </td>
      <td>
        <span style="color: white;" t-esc="'..'"/>
        <span t-att-style="style" t-esc="account['name']"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['balance_prev']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['debit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['credit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['balance_total']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
    </tr>
  </template>

  <template id="anexo_al_balance.report_partner_trial_balance_subtotal">
    <tr>
      <td>
        <span t-att-style="style" t-esc="account['code']"/>
      </td>
      <td>
        <span style="color: white;" t-esc="'..'"/>
        <span t-att-style="style" t-esc="account['name']"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['balance_prev']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['debit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['credit']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
      <td class="text-right">
        <span t-att-style="style" t-esc="account['balance_total']" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
      </td>
    </tr>
  </template>
  <template id="anexo_al_balance.report_partner_trial_balance">
    <t t-call="report.html_container">
      <t t-call="report.internal_layout">
        <div class="page">
          
          <h2><span t-esc="res_company.name"/>: Partner Trial Balance</h2>

          <div class="row mt32">
            <div class="col-xs-4">
              <strong>Display Account:</strong>
              <p>
                <span t-if="data['display_account'] == 'all'">All accounts</span>
                <span t-if="data['display_account'] == 'movement'">With movements</span>
                <span t-if="data['display_account'] == 'not_zero'">With balance not equal to zero</span>
              </p>
            </div>
            <div class="col-xs-4">
              <p>
                <t t-if="data['date_from']"><strong>Date from :</strong> <span t-esc="data['date_from']"/><br/></t>
                <t t-if="data['date_to']"><strong>Date to :</strong> <span t-esc="data['date_to']"/></t>
              </p>
            </div>
            <div class="col-xs-4">
              <strong>Target Moves:</strong>
              <p>
                <span t-if="data['target_move'] == 'all'">All Entries</span>
                <span t-if="data['target_move'] == 'posted'">All Posted Entries</span>
              </p>
            </div>
          </div>

          
          <table class="table table-condensed">
            <thead>
              <tr>
                <th>Code</th>
                <th>Account</th>
                <th class="text-right">Balance Prev</th>
                <th class="text-right">Debit</th>
                <th class="text-right">Credit</th>
                <th class="text-right">Balance</th>
              </tr>
            </thead>
            <tbody>
              <t t-foreach="Accounts" t-as="account">
                <t t-if="account['type'] == 'line'">
                  <tr>
                    <td colspan="5"></td>
                  </tr>
                  <t t-call="anexo_al_balance.report_partner_trial_balance_line"/>
                </t>
                <t t-elif="account['type'] == 'subline' ">
                  <t t-call="anexo_al_balance.report_partner_trial_balance_subline"/>
                </t>
                <t t-elif="account['type'] == 'subtotal' ">
                  <t t-call="anexo_al_balance.report_partner_trial_balance_subtotal"/>
                </t>
              </t>
            </tbody>
          </table>
          
        </div>
      </t>
    </t>
  </template>
</odoo>
